# 챕터 2. React는 최초 마운트를 어떻게 수행하나요?

## 파이버 아키텍처에 대해 설명

![image](https://github.com/user-attachments/assets/73a6bfef-1910-4d80-8a2a-ebaad4339d09)


- Fiber
  - 리액트가 앱 상태를 내부적으로 표현하는 방식의 아키텍처
  - FiberRootNode와 FiberNode로 구성된 구조
  - 백업 DOM 노드인 HostComponent도 있음
- FiberRootNode
  - React 루트 역할하는 노드
  - 전체 앱에 대한 필요한 메타정보 보유
  - 이 노드의 current는 실제 파이버 트리를 가리킴
  - 새로운 파이버 트리가 생성되면 current는 새로운 HostRoot 가리킴
- FiberNode (중요한 속성만 나열)
  - tag: 컴포넌트 유형 구분을 위한 속성 e.g) FunctionComponent, HostRoot, ContextConsumer, MemoComponent, SuspenseComponent 등 
  - stateNode: 다른 백업 데이터 가리킴, HostComponent 경우 stateNode는 실제 백업 DOM 노드를 가리킴
  - child, sibling, return
  - elementType: 제공하는 컴포넌트 함수 또는 고유 HTML 태그
  - flags: commit 단계에서 적용할 업데이트 나타냄!
  - lanes: 보류 중인 업데이트들의 우선순위 나타냄
  - memoizedState: 중요한 데이터 가리킴
 
## 최초 마운트: Trigger 단계
createRoot()는 current로 React 루트(HostRoot) 생성

```js
const root = new FiberRootNode(...)
const uninitializedFiber = createHostRootFiber(...)
root.current = uninitializedFiber
uninitializedFiber.stateNode = root;

return root;
```

root.render() 는 HostRoot에서 업데이트를 예약. 엘리먼트의 인수는 업데이트 페이로드에 저장

## 최초 마운트: Render 단계

performConcurrentWorkOnRoot()는 최초 마운트 및 리렌더링 모두의 렌더링 시작 진입점






























